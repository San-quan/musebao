# =============================================
# Clash é…ç½®æ–‡ä»¶ï¼ˆæœ€ç»ˆå¢å¼ºç‰ˆ - INI æ ¼å¼ï¼‰
# æ—¥æœŸï¼š2025-11-19
# æè¿°ï¼šå“åº”è¦æ±‚ â€” å¤šä¸ªä¸­å›½èŠ‚ç‚¹ã€å¼€å¯ UDP è½¬å‘ã€æµ‹è¯•é˜¶æ®µå·²å®Œæˆï¼Œ
#       å°† log-level æ¢å¤åˆ° info ä¸ external-controller ç»‘å®šåˆ° localhost
# =============================================

[General]
mixed-port = 7890                # Clash æ··åˆç«¯å£
socks-port = 7891                # SOCKS ç«¯å£
allow-lan = true                 # å…è®¸å±€åŸŸç½‘è®¿é—®
mode = rule                      # ä½¿ç”¨è§„åˆ™æ¨¡å¼
log-level = info                 # è¿è¡Œæ¨¡å¼ä¸‹å»ºè®® info
external-controller = 127.0.0.1:9090
secret = secure-password         # ç®¡ç†é¢æ¿è®¿é—®å¯†ç ï¼ˆè¯·æ›´æ”¹ï¼‰

[DNS]
enable = true
enhanced-mode = fake-ip          # Fake-IP æ¨¡å¼ç”¨äºé˜² DNS æ±¡æŸ“
fake-ip-range = 198.18.0.1/16
nameserver = https://dns.alidns.com/dns-query,https://doh.pub/dns-query,https://dns.cloudflare.com/dns-query,tls://1.1.1.1,tls://9.9.9.9
fallback = https://dns.google/dns-query,https://doh.dns.sb/dns-query
fallback-filter.geoip = true
fallback-filter.geoip-code = CN

[Proxies]
# --- æœ¬åœ°å¤šä¸ªä¸­å›½èŠ‚ç‚¹ç¤ºä¾‹ï¼ˆè¯·æ›¿æ¢ä¸ºçœŸå®èŠ‚ç‚¹ï¼‰ ---
proxy-cn-1.name = ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹-1
proxy-cn-1.type = vmess
proxy-cn-1.server = cn-node1.example.com
proxy-cn-1.port = 443
proxy-cn-1.uuid = your-uuid-1
proxy-cn-1.alterId = 0
proxy-cn-1.cipher = auto
proxy-cn-1.tls = true
proxy-cn-1.network = ws
proxy-cn-1.ws-opts.path = /ws
proxy-cn-1.ws-opts.headers.Host = host.cn-node1.example.com
proxy-cn-1.udp = true                # ç¡®ä¿æœ¬åœ°é…ç½®å¼€å¯ UDP è½¬å‘

proxy-cn-2.name = ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹-2
proxy-cn-2.type = trojan
proxy-cn-2.server = cn-node2.example.com
proxy-cn-2.port = 443
proxy-cn-2.password = your-password-2
proxy-cn-2.sni = host.cn-node2.example.com
proxy-cn-2.tls = true
proxy-cn-2.udp = true

proxy-cn-3.name = ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹-3
proxy-cn-3.type = ss
proxy-cn-3.server = cn-node3.example.com
proxy-cn-3.port = 8388
proxy-cn-3.cipher = aes-128-gcm
proxy-cn-3.password = your-password-3
proxy-cn-3.plugin = v2ray-plugin
proxy-cn-3.plugin-opts.mode = websocket
proxy-cn-3.plugin-opts.tls = true
proxy-cn-3.udp = true

# --- æµ·å¤– & å…œåº•ç¤ºä¾‹ï¼ˆä¿ç•™æˆ–æ›¿æ¢ï¼‰ ---
proxy-oversea.name = ğŸŒ æµ·å¤–èŠ‚ç‚¹
proxy-oversea.type = ss
proxy-oversea.server = oversea.example.com
proxy-oversea.port = 8388
proxy-oversea.cipher = aes-128-gcm
proxy-oversea.password = your-oversea-password
proxy-oversea.plugin = v2ray-plugin
proxy-oversea.plugin-opts.mode = websocket
proxy-oversea.plugin-opts.tls = true

proxy-hk.name = ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ï¼ˆå…œåº•ï¼‰
proxy-hk.type = trojan
proxy-hk.server = hk-node.example.com
proxy-hk.port = 443
proxy-hk.password = your-hk-password
proxy-hk.sni = host.hk-node.example.com
proxy-hk.udp = true

[Proxy Providers]
# æŠŠä½ æä¾›çš„è®¢é˜…ä½œä¸ºä»£ç†æä¾›å™¨å¼•å…¥ï¼ˆClash ä¼šæŠŠè®¢é˜…è§£ææˆä»£ç†åˆ—è¡¨ï¼‰
subscription-return-cn.type = http
subscription-return-cn.url = https://api.starbb.sbs/api/v1/client/subscribe?token=7e8533f604428501936169981fddfbc1
subscription-return-cn.path = ./proxies/subscription-return-cn.yaml
subscription-return-cn.interval = 3600    # æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼ˆæŒ‰éœ€è°ƒæ•´ï¼‰
subscription-return-cn.lazy = true       # æ‡’åŠ è½½ï¼šä»…åœ¨éœ€è¦æ—¶æ‹‰å–å’Œè§£æ

# å…¶ä»– Rule Providerï¼ˆå¹¿å‘Šã€æµåª’ä½“ã€ACL4SSR BackCNï¼‰
ads.type = http
ads.behavior = domain
ads.url = https://raw.githubusercontent.com/AdRules/AdBlock/main/reject.ini
ads.path = ./rules/ads.yaml
ads.interval = 86400

media.type = http
media.behavior = domain
media.url = https://raw.githubusercontent.com/StreamRules/Media/master/rules.ini
media.path = ./rules/media.yaml
media.interval = 86400

# ACL4SSR BackCNï¼ˆå›å›½ / ä¸­å›½æœ¬åœ° IP åˆ—è¡¨ï¼‰
# è¯·æ ¹æ®ä½ ä¿¡ä»»çš„æºæ›¿æ¢ä¸‹æ–¹ URLï¼Œå¦‚éœ€æˆ‘æ›¿æ¢ä¸ºå…·ä½“å¯é é•œåƒè¯·å‘Šè¯‰æˆ‘
ACL4SSR_BackCN.type = http
ACL4SSR_BackCN.behavior = ipcidr
ACL4SSR_BackCN.url = https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/rules/BackCN.acl
ACL4SSR_BackCN.path = ./rules/ACL4SSR_BackCN.yaml
ACL4SSR_BackCN.interval = 86400  # æ¯æ—¥æ›´æ–°

[Proxy Groups]
# å›å›½åˆ†ç»„ï¼šå°†æœ¬åœ°ä¸­å›½èŠ‚ç‚¹ä¸è®¢é˜…èŠ‚ç‚¹éƒ½ä½œä¸ºå€™é€‰ï¼Œä½¿ç”¨ url-test è‡ªåŠ¨æµ‹é€Ÿé€‰æ‹©æœ€ä¼˜èŠ‚ç‚¹
proxy-group-return.name = å›å›½
proxy-group-return.type = url-test
proxy-group-return.proxies = ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹-1,ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹-2,ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹-3,subscription-return-cn,DIRECT
proxy-group-return.interval = 180     # æµ‹é€Ÿé—´éš”ï¼ˆç§’ï¼‰
proxy-group-return.lazy = true

# æµåª’ä½“åˆ†ç»„ï¼šæµ·å¤–ä¼˜å…ˆ
proxy-group-media.name = ğŸ¬ æµåª’ä½“åˆ†ç»„
proxy-group-media.type = url-test
proxy-group-media.proxies = ğŸŒ æµ·å¤–èŠ‚ç‚¹,ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ï¼ˆå…œåº•ï¼‰
proxy-group-media.interval = 240
proxy-group-media.tolerance = 100
proxy-group-media.lazy = true

# å›½å†…åˆ†ç»„ï¼ˆfallbackï¼‰
proxy-group-cn.name = ğŸ“± å›½å†…åˆ†ç»„
proxy-group-cn.type = fallback
proxy-group-cn.proxies = ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹-1,ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ï¼ˆå…œåº•ï¼‰
proxy-group-cn.health-check.enable = true
proxy-group-cn.health-check.url = https://www.cloudflare.com/cdn-cgi/trace
proxy-group-cn.health-check.url-fallback = https://cdn-testing.example.com
proxy-group-cn.health-check.interval = 300

proxy-group-dyn.name = åŠ¨æ€å»¶è¿Ÿæµ‹é€Ÿç»„
proxy-group-dyn.type = url-test
proxy-group-dyn.proxies = ğŸŒ æµ·å¤–èŠ‚ç‚¹,ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹-1,ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ï¼ˆå…œåº•ï¼‰
proxy-group-dyn.interval = 300
proxy-group-dyn.tolerance = 50

proxy-group-global.name = å…¨å±€ä¼˜é€‰åˆ†ç»„
proxy-group-global.type = fallback
proxy-group-global.proxies = åŠ¨æ€å»¶è¿Ÿæµ‹é€Ÿç»„,ğŸ“± å›½å†…åˆ†ç»„

proxy-group-local.name = æœ¬åœ°
proxy-group-local.type = select
proxy-group-local.proxies = DIRECT,ğŸ“± å›½å†…åˆ†ç»„

[Rules]
# è§„åˆ™é‡‡ç”¨ first-match winsï¼ŒACL4SSR_BackCN æ”¾åœ¨å‰ä»¥ä¼˜å…ˆå›å›½
rule-1 = RULE-SET,ACL4SSR_BackCN,å›å›½        # å›å›½ IP åˆ—è¡¨ -> å›å›½åˆ†ç»„ï¼ˆä¼˜å…ˆä½¿ç”¨ä¸­å›½èŠ‚ç‚¹æˆ–ç›´è¿ï¼‰
rule-2 = RULE-SET,ads,REJECT                # å¹¿å‘Šå±è”½
rule-3 = RULE-SET,media,ï¿½ï¿½ æµåª’ä½“åˆ†ç»„         # æµåª’ä½“å¹³å°
rule-4 = DOMAIN-SUFFIX,baidu.com,DIRECT     # ç™¾åº¦æœåŠ¡ç›´è¿
rule-5 = DOMAIN-SUFFIX,qcloud.com,DIRECT    # è…¾è®¯äº‘ç›´è¿
rule-6 = DOMAIN-SUFFIX,steam.cn,ğŸ¬ æµåª’ä½“åˆ†ç»„ # Steam æ¸¸æˆï¼ˆç¤ºä¾‹ï¼‰
rule-7 = DOMAIN-KEYWORD,youtube,ğŸ¬ æµåª’ä½“åˆ†ç»„ # YouTube
rule-8 = GEOIP,CN,ğŸ“± å›½å†…åˆ†ç»„                # GEOIP åˆ¤å®šçš„ CN -> å›½å†…åˆ†ç»„ï¼ˆåœ¨ ACL4SSR ä¹‹åï¼‰
rule-9 = DOMAIN-SUFFIX,example-bad-site.com,REJECT  # æ‹’ç»è®¿é—®ç¤ºä¾‹
rule-10 = MATCH,å…¨å±€ä¼˜é€‰åˆ†ç»„                 # é»˜è®¤æœªå‘½ä¸­èµ°å…¨å±€ä¼˜é€‰åˆ†ç»„

[Device Rules]
# é’ˆå¯¹ç‰¹å®šè®¾å¤‡çš„è§„åˆ™ï¼ˆæŒ‰éœ€ä¿®æ”¹ï¼‰
device-rule-1 = SRC-IP-CIDR,192.168.1.100/32,ğŸ¬ æµåª’ä½“åˆ†ç»„  # æ™ºèƒ½ç”µè§†
device-rule-2 = SRC-IP-CIDR,192.168.1.101/32,åŠ¨æ€å»¶è¿Ÿæµ‹é€Ÿç»„ # æ¸¸æˆæœº
device-rule-3 = SRC-IP-CIDR,192.168.1.110/32,DIRECT        # ç›‘æ§æ‘„åƒå¤´
device-rule-4 = SRC-IP-CIDR,192.168.1.120/32,ğŸ“± å›½å†…åˆ†ç»„    # IoT è®¾å¤‡

[TUN]
# é€æ˜ä»£ç†ä¸ç½‘ç»œé€‚é…ï¼ˆè§†å¹³å°æ”¯æŒæƒ…å†µå¯ç”¨ï¼‰
enable = true
stack = system
strict-route = true
auto-detect-interface = true
dns-hijack = any:53
mtu = 1480

[Sniffer]
enable = true
force-domain = +.youtube.com,+.netflix.com,+.twitch.tv,+.disneyplus.com,+.steam.com,+.spotify.com

[Profile]
profile.store-selected = true
profile.restore-selected = true
profile.store-fake-ip = true
