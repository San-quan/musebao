# =============================================
# Clash é…ç½®æ–‡ä»¶ï¼ˆæœ€ç»ˆå¢å¼ºç‰ˆ - INI æ ¼å¼ï¼‰
# æ—¥æœŸï¼š2025-11-19
# æè¿°ï¼šå“åº”è¦æ±‚ â€” å¤šä¸ªä¸­å›½èŠ‚ç‚¹ã€å¼€å¯ UDP è½¬å‘ã€æµ‹è¯•é˜¶æ®µå·²å®Œæˆï¼Œ
#       å°† log-level æ¢å¤åˆ° info ä¸ external-controller ç»‘å®šåˆ° localhost
# =============================================

[General]
mixed-port = 7890                # Clash æ··åˆç«¯å£
socks-port = 7891                # SOCKS ç«¯å£
allow-lan = true                 # å…è®¸å±€åŸŸç½‘è®¿é—®
mode = rule                      # ä½¿ç”¨è§„åˆ™æ¨¡å¼
log-level = info                 # æ—¥å¿—è¾“å‡ºä¿¡æ¯çº§åˆ«
external-controller = 127.0.0.1:9090
secret = secure-password          # ç®¡ç†é¢æ¿è®¿é—®å¯†ç 

[DNS]
enable = true
enhanced-mode = fake-ip          # Fake-IP æ¨¡å¼ç”¨äºé˜² DNS æ±¡æŸ“
fake-ip-range = 198.18.0.1/16
nameserver = https://dns.alidns.com/dns-query,https://doh.pub/dns-query,https://dns.cloudflare.com/dns-query,tls://1.1.1.1,tls://9.9.9.9
fallback = https://dns.google/dns-query,https://doh.dns.sb/dns-query
fallback-filter.geoip = true
fallback-filter.geoip-code = CN

[Proxies]
# å®šä¹‰ä»£ç†èŠ‚ç‚¹åˆ—è¡¨
proxy-1.name = ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹
proxy-1.type = vmess
proxy-1.server = your-china-server.example.com
proxy-1.port = 443
proxy-1.uuid = your-uuid
proxy-1.alterId = 0
proxy-1.cipher = auto
proxy-1.tls = true
proxy-1.network = ws
proxy-1.ws-opts.path = /ws
proxy-1.ws-opts.headers.Host = host.your-china-server.com

proxy-2.name = ğŸŒ æµ·å¤–èŠ‚ç‚¹
proxy-2.type = ss
proxy-2.server = your-oversea-server.example.com
proxy-2.port = 8388
proxy-2.cipher = aes-128-gcm
proxy-2.password = your-oversea-password
proxy-2.plugin = v2ray-plugin
proxy-2.plugin-opts.mode = websocket
proxy-2.plugin-opts.tls = true

proxy-3.name = ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ï¼ˆå…œåº•ï¼‰
proxy-3.type = trojan
proxy-3.server = your-hk-server.example.com
proxy-3.port = 443
proxy-3.password = your-hk-password
proxy-3.sni = host.your-hk-server.com
proxy-3.udp = true

[Proxy Groups]
# å®šä¹‰ä»£ç†åˆ†ç»„
proxy-group-1.name = ğŸ¬ æµåª’ä½“åˆ†ç»„
proxy-group-1.type = url-test
proxy-group-1.proxies = ğŸŒ æµ·å¤–èŠ‚ç‚¹,ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ï¼ˆå…œåº•ï¼‰
proxy-group-1.interval = 240            # æµ‹é€Ÿé—´éš” 4 åˆ†é’Ÿ
proxy-group-1.tolerance = 100           # å»¶è¿Ÿå®¹å¿å€¼
proxy-group-1.lazy = true               # ä»…åœ¨è®¿é—®æ—¶è§¦å‘æµ‹é€Ÿ

proxy-group-2.name = ğŸ“± å›½å†…åˆ†ç»„
proxy-group-2.type = fallback
proxy-group-2.proxies = ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹,ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ï¼ˆå…œåº•ï¼‰
proxy-group-2.health-check.enable = true
proxy-group-2.health-check.url = https://www.cloudflare.com/cdn-cgi/trace  # å¥åº·æ£€æŸ¥ URL
proxy-group-2.health-check.url-fallback = https://cdn-testing.example.com
proxy-group-2.health-check.interval = 300 # å¥åº·æ£€æŸ¥é—´éš” 5 åˆ†é’Ÿ

proxy-group-3.name = åŠ¨æ€å»¶è¿Ÿæµ‹é€Ÿç»„
proxy-group-3.type = url-test
proxy-group-3.proxies = ğŸŒ æµ·å¤–èŠ‚ç‚¹,ğŸ‡¨ğŸ‡³ ä¸­å›½èŠ‚ç‚¹,ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ï¼ˆå…œåº•ï¼‰
proxy-group-3.interval = 300             # æµ‹é€Ÿé—´éš” 5 åˆ†é’Ÿ
proxy-group-3.tolerance = 50

proxy-group-4.name = å…¨å±€ä¼˜é€‰åˆ†ç»„
proxy-group-4.type = fallback
proxy-group-4.proxies = åŠ¨æ€å»¶è¿Ÿæµ‹é€Ÿç»„,ğŸ“± å›½å†…åˆ†ç»„

[Rule Providers]
# åŠ¨æ€è§„åˆ™æä¾›å™¨
ads.type = http
ads.behavior = domain
ads.url = https://raw.githubusercontent.com/AdRules/AdBlock/main/reject.ini
ads.path = ./rules/ads.yaml
ads.interval = 86400  # æ¯æ—¥æ›´æ–°

media.type = http
media.behavior = domain
media.url = https://raw.githubusercontent.com/StreamRules/Media/master/rules.ini
media.path = ./rules/media.yaml
media.interval = 86400  # æ¯æ—¥åŠ¨æ€åŠ è½½æ›´æ–°

[Rules]
# æµé‡åˆ†æµè§„åˆ™
rule-1 = RULE-SET,ads,REJECT                # å¹¿å‘Šå±è”½
rule-2 = RULE-SET,media,ğŸ¬ æµåª’ä½“åˆ†ç»„         # æµåª’ä½“å¹³å°
rule-3 = DOMAIN-SUFFIX,baidu.com,DIRECT     # ç™¾åº¦æœåŠ¡
rule-4 = DOMAIN-SUFFIX,qcloud.com,DIRECT    # è…¾è®¯äº‘
rule-5 = DOMAIN-SUFFIX,steam.cn,ğŸ¬ æµåª’ä½“åˆ†ç»„ # Steam æ¸¸æˆ
rule-6 = DOMAIN-KEYWORD,youtube,ğŸ¬ æµåª’ä½“åˆ†ç»„ # YouTube
rule-7 = GEOIP,CN,ğŸ“± å›½å†…åˆ†ç»„                # å›½å†… IP ä½¿ç”¨å›½å†…ç»„
rule-8 = DOMAIN-SUFFIX,example-bad-site.com,REJECT  # æ‹’ç»è®¿é—®
rule-9 = MATCH,å…¨å±€ä¼˜é€‰åˆ†ç»„                  # é»˜è®¤æ‰€æœ‰æœªå‘½ä¸­æµé‡å…œåº•åˆ°ä¼˜é€‰åˆ†ç»„

[Device Rules]
# é’ˆå¯¹ç‰¹å®šè®¾å¤‡çš„è§„åˆ™
device-rule-1 = SRC-IP-CIDR,192.168.1.100/32,ğŸ¬ æµåª’ä½“åˆ†ç»„  # æ™ºèƒ½ç”µè§†
device-rule-2 = SRC-IP-CIDR,192.168.1.101/32,åŠ¨æ€å»¶è¿Ÿæµ‹é€Ÿç»„ # æ¸¸æˆæœº
device-rule-3 = SRC-IP-CIDR,192.168.1.110/32,DIRECT        # ç›‘æ§æ‘„åƒå¤´
device-rule-4 = SRC-IP-CIDR,192.168.1.120/32,ğŸ“± å›½å†…åˆ†ç»„    # IoT è®¾å¤‡

[TUN]
# é€æ˜ä»£ç†ä¸ç½‘ç»œé€‚é…
enable = true
stack = system
strict-route = true
auto-detect-interface = true          # è‡ªåŠ¨æ£€æµ‹ç½‘å¡é€‰æ‹©
dns-hijack = any:53
mtu = 1480

[Sniffer]
# æµé‡å—…æ¢ï¼Œè¦†ç›–ä¸»æµæœåŠ¡
enable = true
force-domain = +.youtube.com,+.netflix.com,+.twitch.tv,+.disneyplus.com,+.steam.com,+.spotify.com

[Profile]
# ç”¨æˆ·é…ç½®å­˜å‚¨
profile.store-selected = true
profile.restore-selected = true
profile.store-fake-ip = true
